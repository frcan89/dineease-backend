# openapi/schemas/RecetaInputSchema.yaml
type: object
required:
  - nombre
  # id_restaurante se tomará del usuario autenticado en el backend
properties:
  nombre:
    type: string
    maxLength: 255
    example: "Salsa de Tomate Casera"
  descripcion:
    type: string
    nullable: true
  tiempo_preparacion:
    type: integer
    nullable: true
    minimum: 0
    description: "Tiempo de preparación en minutos"
  instrucciones:
    type: string
    nullable: true
  porciones:
    type: integer
    nullable: true
    minimum: 1
    default: 1
  precio_costo:
    type: number
    format: float
    nullable: true
    minimum: 0
    description: "Costo estimado de preparación de la receta."
  ingredientes:
    type: array
    description: "Lista de ingredientes para la receta. Al actualizar, esta lista REEMPLAZARÁ los ingredientes existentes de la receta."
    nullable: true # Permitir enviar una receta sin ingredientes inicialmente, o un array vacío para quitarlos todos
    items:
      type: object
      required:
        - id_producto
        - cantidad
      properties:
        id_producto:
          type: integer
          description: "ID del producto que es un ingrediente."
        cantidad:
          type: number # En DDL es DECIMAL(10,2)
          format: float
          description: "Cantidad del producto necesaria."
          minimum: 0.01 # Un ingrediente debe tener alguna cantidad
        unidad_medida_receta:
          type: string
          maxLength: 50
          nullable: true
          description: "Unidad de medida para este ingrediente en la receta (ej. gramos, ml, unidades). Puede diferir de la unidad base del producto."